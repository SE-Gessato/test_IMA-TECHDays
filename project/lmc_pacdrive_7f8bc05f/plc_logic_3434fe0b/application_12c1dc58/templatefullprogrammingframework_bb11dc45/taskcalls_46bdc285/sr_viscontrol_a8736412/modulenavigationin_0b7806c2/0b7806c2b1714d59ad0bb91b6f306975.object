{"payload":{"meta":{"Graph":{"@Type":"81297157","@Value":{"Guid":"(Guid)0b7806c2-b171-4d59-ad0b-b91b6f306975","ParentGuid":"(Guid)a8736412-820a-458d-a88c-f60de058aebb","Name":"(string)ModuleNavigationIn","Properties":{"@Type":"2c41fa04:IDictionary","@Value":{}},"TypeGuid":"(Guid)8ac092e5-3128-4e26-9e7e-11016c6684f2","EmbeddedTypeGuids":{"@Type":"[Guid]","@Value":["(Guid)3b83b776-fb25-43b8-99f2-3c507c9143fc"]}}},"TypeInfos":{"2c41fa04":"{2c41fa04-1834-41c1-816e-303c7aa2c05b}","81297157":"{81297157-7ec9-45ce-845e-84cab2b88ade}","Guid":"System.Guid","string":"System.String"}},"object":{"Graph":{"@Type":"8ac092e5","@Value":{"Implementation":{"@Type":"3b83b776","@Value":{"TextDocument":{"@Type":"f3878285","@Value":{"TextBlobForSerialisation":"(string)(* Navigation *)\n\n(* 2D navigation *)\nIF(vpiq_xNavUp OR vpiq_xNavDown OR vpiq_xNavLeft OR vpiq_xNavRight) THEN\n\tIF vpiq_xNavRight THEN\n\t\t(* Move the the next module on the same level *)\n\t\tIF audiHierarchy[udiCurrentLevel] + 1 <= udiCurrentLevelSize + udiCurrentNumberOfControlModules  THEN\n\t\t\taudiHierarchy[udiCurrentLevel] := audiHierarchy[udiCurrentLevel] + 1;\n\t\t\tIF audiHierarchy[udiCurrentLevel]  > udiCurrentLevelSize THEN\n\t\t\t\tudiControlModuleSelectedInLevel\t:= udiCurrentLevel;\n\t\t\t\tvpq_udiActiveControlModuleNumber:= audiHierarchy[udiCurrentLevel]-udiCurrentLevelSize;\n\t\t\tEND_IF\n\t\tEND_IF\n\tEND_IF\n\tIF vpiq_xNavLeft THEN\n\t\t(* Move the the previous module on the same level *)\n\t\tIF audiHierarchy[udiCurrentLevel] -1 >= 1 THEN\n\t\t\taudiHierarchy[udiCurrentLevel] := audiHierarchy[udiCurrentLevel] - 1;\n\t\t\tvpq_udiActiveControlModuleNumber:= audiHierarchy[udiCurrentLevel]-udiCurrentLevelSize;\n\t\t\tIF audiHierarchy[udiCurrentLevel] <= udiCurrentLevelSize THEN\n\t\t\t\tudiControlModuleSelectedInLevel\t:= 0;\n\t\t\t\tvpq_udiActiveControlModuleNumber:= 0;\n\t\t\tEND_IF\n\t\tEND_IF (* ELSE ignore *)\n\tEND_IF\n\tIF vpiq_xNavUp THEN\n\t\t(* Move one level up *)\n\t\tudiControlModuleSelectedInLevel := 0;\n\t\tvpq_udiActiveControlModuleNumber:= 0;\n\t\tIF udiCurrentLevel - 1 >= 1 THEN\n\t\t\tudiCurrentLevel := udiCurrentLevel - 1;\n\t\tEND_IF (* ELSE ignore *)\n\tEND_IF\n\tIF vpiq_xNavDown THEN\n\t\t(* Move one level down *)\n\t\tIF (udiCurrentLevel + 1 <= c_udiMaxHierarchyLevels) AND (xCurrentHasSubModules OR xCurrentHasControlModules) THEN\n\t\t\tudiCurrentLevel := udiCurrentLevel + 1;\n\t\t\taudiHierarchy[udiCurrentLevel] := 1;\n\t\t\tIF NOT xCurrentHasSubModules AND xCurrentHasControlModules THEN\n\t\t\t\tudiControlModuleSelectedInLevel := udiCurrentLevel;\n\t\t\t\tvpq_udiActiveControlModuleNumber:= audiHierarchy[udiCurrentLevel];\n\t\t\tELSE\n\t\t\t\tudiControlModuleSelectedInLevel\t:= 0;\n\t\t\t\tvpq_udiActiveControlModuleNumber:= 0;\n\t\t\tEND_IF\n\n\t\tEND_IF (* ELSE ignore *)\n\tEND_IF\n\n\tvpiq_xNavUp\t\t:= FALSE;\n\tvpiq_xNavDown\t:= FALSE;\n\tvpiq_xNavLeft\t:= FALSE;\n\tvpiq_xNavRight\t:= FALSE;\n\t\n\txUpdateData := TRUE;\nEND_IF (* End 2D navbutton hit *)\n\n(* Direct navigation (on level 2 and 3) *)\n(* Module level *)\nIF vpiq_axModuleList[1] OR vpiq_axModuleList[2] OR vpiq_axModuleList[3] OR vpiq_axModuleList[4] OR vpiq_axModuleList[5] OR\n   vpiq_axControlModuleList[1] OR vpiq_axControlModuleList[2] OR vpiq_axControlModuleList[3] OR vpiq_axControlModuleList[4] OR vpiq_axControlModuleList[5] THEN\n\tudiCurrentLevel := 2;\n\tudiCurrentLevel := 2;\n\tFOR udiTmp := 1 TO 5 DO\n\t\t(*select an equipment module via the buttons on level 2*)\n\t\tIF(vpiq_axModuleList[udiTmp]) THEN\n\t\t\taudiHierarchy[udiCurrentLevel] := udiTmp + udiMinModuleList - 1;\n\t\t\tvpiq_axModuleList[udiTmp] := FALSE;\n\t\t\tudiControlModuleSelectedInLevel := 0;\n\t\t\tvpq_udiActiveControlModuleNumber:= 0;\n\t\tEND_IF\n\t\t(*select a control module via the buttons on level 2*)\n\t\tIF vpiq_axControlModuleList[udiTmp] THEN\n\t\t\taudiHierarchy[udiCurrentLevel] := udiTmp + udiMinModuleList - 1;\n\t\t\tudiControlModuleSelectedInLevel\t:= udiCurrentLevel;\n\t\t\tvpiq_axControlModuleList[udiTmp] := FALSE;\n\t\tEND_IF\n\tEND_FOR\n\txUpdateData := TRUE;\nEND_IF\nIF vpiq_xModuleListDown THEN\n\tvpiq_xModuleListDown := FALSE;\n\tIF(udiMinModuleList > 1) THEN\n\t\tudiMinModuleList := udiMinModuleList - 1;\n\tEND_IF\n\txUpdateData := TRUE;\nEND_IF\nIF vpiq_xModuleListUp THEN\n\tvpiq_xModuleListUp := FALSE;\n\tIF(udiMinModuleList + 4 <= vpq_stMachineInterface.iq_stExt.udiNumberOfSubModules + vpq_stMachineInterface.iq_stExt.udiNumberOfControlModules) THEN\n\t\tudiMinModuleList := udiMinModuleList + 1;\n\tEND_IF\n\txUpdateData := TRUE;\nEND_IF\n(* Submodule level *)\nIF(udiCurrentLevel >= 2) THEN (* Impossible if the main machine is selected *)\n\tIF vpiq_axSubModuleList[1] OR vpiq_axSubModuleList[2] OR vpiq_axSubModuleList[3] OR vpiq_axSubModuleList[4] OR vpiq_axSubModuleList[5] OR\n\t   vpiq_axSubControlModuleList[1] OR vpiq_axSubControlModuleList[2] OR vpiq_axSubControlModuleList[3] OR vpiq_axSubControlModuleList[4] OR vpiq_axSubControlModuleList[5] THEN\n\t\tudiCurrentLevel := 3;\n\t\tFOR udiTmp := 1 TO 5 DO\n\t\t\t(*select an equipment module via the buttons on level 3*)\n\t\t\tIF(vpiq_axSubModuleList[udiTmp]) THEN\n\t\t\t\taudiHierarchy[udiCurrentLevel] := udiTmp + udiMinSubModuleList - 1;\n\t\t\t\tvpiq_axSubModuleList[udiTmp] := FALSE;\n\t\t\t\tudiControlModuleSelectedInLevel\t:= 0;\n\t\t\t\tvpq_udiActiveControlModuleNumber\t:= 0;\n\t\t\tEND_IF\n\t\t\t(*select a control module via the buttons on level 3*)\n\t\t\tIF vpiq_axSubControlModuleList[udiTmp] THEN\n\t\t\t\taudiHierarchy[udiCurrentLevel] := udiTmp + udiMinSubModuleList - 1;\n\t\t\t\tvpiq_axSubControlModuleList[udiTmp] := FALSE;\n\t\t\t\tudiControlModuleSelectedInLevel\t:= udiCurrentLevel;\n\t\t\tEND_IF\n\t\tEND_FOR\n\t\txUpdateData := TRUE;\n\tEND_IF\n\tIF vpiq_xSubModuleListDown THEN\n\t\tvpiq_xSubModuleListDown := FALSE;\n\t\tIF(udiMinSubModuleList > 1) THEN\n\t\t\tudiMinSubModuleList := udiMinSubModuleList - 1;\n\t\tEND_IF\n\t\txUpdateData := TRUE;\n\tEND_IF\n\tIF vpiq_xSubModuleListUp THEN\n\t\tvpiq_xSubModuleListUp := FALSE;\n\t\tIF(udiMinSubModuleList + 4 < udiCurrentLevel3Size + udiNumberOfControlModulesLevel2) THEN\n\t\t\tudiMinSubModuleList := udiMinSubModuleList + 1;\n\t\tEND_IF\n\t\txUpdateData := TRUE;\n\tEND_IF\nEND_IF","LineInfoPersistence":"(string)0b7806c2-b171-4d59-ad0b-b91b6f306975_Impl_LineIds"}}}},"UniqueIdGenerator":"(string)263"}},"TypeInfos":{"3b83b776":"{3b83b776-fb25-43b8-99f2-3c507c9143fc}","8ac092e5":"{8ac092e5-3128-4e26-9e7e-11016c6684f2}","f3878285":"{f3878285-8e4f-490b-bb1b-9acbb7eb04db}","string":"System.String"}}},"FormatVersion":"1.0"}