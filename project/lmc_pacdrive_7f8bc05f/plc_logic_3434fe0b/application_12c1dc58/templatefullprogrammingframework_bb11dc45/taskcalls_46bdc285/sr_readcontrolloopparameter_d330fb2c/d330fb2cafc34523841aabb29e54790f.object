{"payload":{"meta":{"Graph":{"@Type":"81297157","@Value":{"Guid":"(Guid)d330fb2c-afc3-4523-841a-abb29e54790f","ParentGuid":"(Guid)12c1dc58-f677-4c4a-94db-2fd2a19f6f97","Name":"(string)SR_ReadControlLoopParameter","Properties":{"@Type":"2c41fa04:IDictionary","@Value":[{"@Key":"(Guid)829a18f2-c514-4f6e-9634-1df173429203","@Value":{"@Type":"829a18f2","@Value":{"ParentObjects":{"@Type":"fa2ee218:IDictionary","@Value":[{"@Key":"(Guid)d9b2b2cc-ea99-4c3b-aa42-1e5c49e65b84","@Value":"(Guid)46bdc285-74cc-46a0-b19d-0c08bb47e86f"}]}}}}]},"TypeGuid":"(Guid)6f9dac99-8de1-4efc-8465-68ac443b7d08","EmbeddedTypeGuids":{"@Type":"[Guid]","@Value":["(Guid)a9ed5b7e-75c5-4651-af16-d2c27e98cb94","(Guid)3b83b776-fb25-43b8-99f2-3c507c9143fc"]}}},"TypeInfos":{"2c41fa04":"{2c41fa04-1834-41c1-816e-303c7aa2c05b}","81297157":"{81297157-7ec9-45ce-845e-84cab2b88ade}","829a18f2":"{829a18f2-c514-4f6e-9634-1df173429203}","fa2ee218":"{fa2ee218-a39b-4b6d-b249-49dbddbd168a}","Guid":"System.Guid","string":"System.String"}},"object":{"Graph":{"@Type":"6f9dac99","@Value":{"SpecialFunc":{"@Type":"0db3d7bb:Enum","@Value":"None"},"Implementation":{"@Type":"3b83b776","@Value":{"TextDocument":{"@Type":"f3878285","@Value":{"TextBlobForSerialisation":"(string)CASE diState OF\n\t\n\t//-------------------------------------------------------------------------------------------------------------------------------------------\n\t0:\t//--- Wait for start\n\t\t\n\t\tIF xStart THEN\n\t\t\txStart\t:= FALSE;\n\t\t\tudiStraightIndex := 0;\n\t\t\tudiCurveIndex\t := 0;\n\t\t\t//-- Get straight segment\n\t\t\tFOR udiIndex := 1  TO GVL_MulticarrierConfiguration.Gc_astTracks[1].udiNumberOfSegments DO\n\t\t\t\tIF NOT GVL_MulticarrierConfiguration.Gc_astSegmentTypes[GVL_MulticarrierConfiguration.Gc_astTracks[1].astSegments[udiIndex].diSegmentTypesIndex].xIsCurved  \n\t\t\t\tTHEN\n\t\t\t\t\tudiStraightIndex\t := udiIndex;\n\t\t\t\t\tEXIT;\n\t\t\t\tEND_IF\n\t\t\tEND_FOR  \n\t\t\t\n\t\t\t//-- Get curve segment\n\t\t\tFOR udiIndex := 1  TO GVL_MulticarrierConfiguration.Gc_astTracks[1].udiNumberOfSegments DO\n\t\t\t\tIF GVL_MulticarrierConfiguration.Gc_astSegmentTypes[GVL_MulticarrierConfiguration.Gc_astTracks[1].astSegments[udiIndex].diSegmentTypesIndex].xIsCurved  \n\t\t\t\tTHEN\n\t\t\t\t\tudiCurveIndex\t  := udiIndex;\n\t\t\t\t\tEXIT;\n\t\t\t\tEND_IF\n\t\t\tEND_FOR  \n\t\t\tdiState := 10;\n\t\tEND_IF\n\t\t\n\t//-------------------------------------------------------------------------------------------------------------------------------------------\n\t10:\t//--- ReadParameter: Pos_P AllSegments\n\t\tuiReadDataLen\t := 4;\n\t\tuiMaxReadDataLen := 4;\n\t\tdiResultSercosReadServiceData \t:= SercosReadServiceDataFromSegments(\ti_dwIDN\t\t\t\t\t:= dwIDNCarrierPosP, \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ti_udiStraightIndex      := udiStraightIndex,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tq_dwDataStraightSegment\t=> dwPosP_Straight, \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ti_udiCurveIndex\t\t    := udiCurveIndex,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tq_dwDataCurveSegment\t=> dwPosP_Curve,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ti_wMaxDataLength\t\t:= 4,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tiq_uiReadDataLen\t\t:= uiReadDataLen,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tiq_uiMaxReadDataLen\t\t:= uiMaxReadDataLen);\n\t\tIF diResultSercosReadServiceData = 0 THEN\n\t\t\tdiState := 20;\n\t\tELSE\n\t\t\tq_xReadParameterError\t:= TRUE;\n\t\t\tdiState\t:= 1000;\n\t\tEND_IF\n\t\t\n\t//-------------------------------------------------------------------------------------------------------------------------------------------\n\t20:\t//--- ReadParameter Vel_P AllSegments\n\t\tuiReadDataLen\t := 4;\n\t\tuiMaxReadDataLen := 4;\n\t\tdiResultSercosReadServiceData \t:= SercosReadServiceDataFromSegments(\ti_dwIDN\t\t\t\t\t:= dwIDNCarrierVelP, \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ti_udiStraightIndex      := udiStraightIndex,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tq_dwDataStraightSegment\t=> dwVelP_Straight, \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ti_udiCurveIndex\t\t    := udiCurveIndex,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tq_dwDataCurveSegment\t=> dwVelP_Curve,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ti_wMaxDataLength\t\t:= 4,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tiq_uiReadDataLen\t\t:= uiReadDataLen,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tiq_uiMaxReadDataLen\t\t:= uiMaxReadDataLen);\t\t\n\t\tIF diResultSercosReadServiceData = 0 THEN\n\t\t\tdiState := 30;\n\t\tELSE\n\t\t\tq_xReadParameterError\t:= TRUE;\n\t\t\tdiState\t:= 1000;\n\t\tEND_IF\n\t\n\t//-------------------------------------------------------------------------------------------------------------------------------------------\n\t30:\t//--- ReadParameter Vel_I AllSegments\n\t\tuiReadDataLen\t := 4;\n\t\tuiMaxReadDataLen := 4;\n\t\tdiResultSercosReadServiceData \t:= SercosReadServiceDataFromSegments(\ti_dwIDN\t\t\t\t\t:= dwIDNCarrierVelI, \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ti_udiStraightIndex      := udiStraightIndex,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tq_dwDataStraightSegment\t=> dwVelI_Straight, \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ti_udiCurveIndex\t\t    := udiCurveIndex,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tq_dwDataCurveSegment\t=> dwVelI_Curve,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ti_wMaxDataLength\t\t:= 4,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tiq_uiReadDataLen\t\t:= uiReadDataLen,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tiq_uiMaxReadDataLen\t\t:= uiMaxReadDataLen);\t\t\n\t\tIF diResultSercosReadServiceData = 0 THEN\n\t\t\tdiState\t:= 40;\n\t\tELSE\n\t\t\tq_xReadParameterError\t:= TRUE;\n\t\t\tdiState\t:= 1000;\n\t\tEND_IF\t\n\t\t\n\t//-------------------------------------------------------------------------------------------------------------------------------------------\n\t40: //--- ReadParameter TrackingDeviation WarningLevel AllSegments\n\t\tuiReadDataLen\t := 4;\n\t\tuiMaxReadDataLen := 4;\n\t\tdiResultSercosReadServiceData := SercosReadServiceDataFromSegments( \ti_dwIDN \t\t\t\t:= dwIDNDeviationLevelWarning,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ti_udiStraightIndex      := udiStraightIndex,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tq_dwDataStraightSegment\t=> dwDeviationLevelWarning,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ti_udiCurveIndex\t\t    := udiCurveIndex,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tq_dwDataCurveSegment\t=> dwDeviationLevelWarning,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ti_wMaxDataLength \t\t:= 4,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tiq_uiReadDataLen\t\t:= uiReadDataLen,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tiq_uiMaxReadDataLen\t\t:= uiMaxReadDataLen);\t\t\n\t\tIF diResultSercosReadServiceData = 0 THEN\n\t\t\tdiState := 50;\n\t\tELSE\n\t\t\tq_xReadParameterError\t:= TRUE;\n\t\t\tdiState := 1000;\n\t\tEND_IF\n\n\t//-------------------------------------------------------------------------------------------------------------------------------------------\n\t50: //--- ReadParameter TrackingDeviation ErrorLevel AllSegments\n\t\tuiReadDataLen\t := 4;\n\t\tuiMaxReadDataLen := 4;\n\t\tdiResultSercosReadServiceData := SercosReadServiceDataFromSegments( \ti_dwIDN \t\t\t\t:= dwIDNDeviationLevelError,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ti_udiStraightIndex      := udiStraightIndex,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tq_dwDataStraightSegment\t=> dwDeviationLevelError,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ti_udiCurveIndex\t\t    := udiCurveIndex,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tq_dwDataCurveSegment\t=> dwDeviationLevelError,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ti_wMaxDataLength \t\t:= 4,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tiq_uiReadDataLen\t\t:= uiReadDataLen,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tiq_uiMaxReadDataLen\t\t:= uiMaxReadDataLen);\t\t\n\t\tIF diResultSercosReadServiceData = 0 THEN\n\t\t\tdiState := 60;\n\t\tELSE\n\t\t\tq_xReadParameterError\t:= TRUE;\n\t\t\tdiState := 1000;\n\t\tEND_IF\t\t\n\t\t\n\t//-------------------------------------------------------------------------------------------------------------------------------------------\n\t60:\t//--- ReadParameter: Maximum Current AllSegments\n\t\n\t\tuiReadDataLen\t := 2;\n\t\tuiMaxReadDataLen := 2;\n\t\tdiResultSercosReadServiceData \t:= SercosReadServiceDataFromSegments(\ti_dwIDN\t\t\t\t\t:= dwIDNCarrierMaxcurr, \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ti_udiStraightIndex      := udiStraightIndex,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tq_dwDataStraightSegment\t=> dwMaxCurr, \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ti_udiCurveIndex\t\t    := udiCurveIndex,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tq_dwDataCurveSegment\t=> dwMaxCurr,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ti_wMaxDataLength\t\t:= 2,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tiq_uiReadDataLen\t\t:= uiReadDataLen,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tiq_uiMaxReadDataLen\t\t:= uiMaxReadDataLen);\t\t\n\t\tIF diResultSercosReadServiceData = 0 THEN\n\t\t\tdiState := 70;\n\t\tELSE\n\t\t\tq_xReadParameterError\t:= TRUE;\n\t\t\tdiState\t:= 1000;\n\t\tEND_IF\t\n\t\n\t//-------------------------------------------------------------------------------------------------------------------------------------------\n\t70:\t//--- ReadParameter: Load of Carrier AllSegments\n\t\tuiReadDataLen\t := 4;\n\t\tuiMaxReadDataLen := 4;\n\t\tdiResultSercosReadServiceData \t:= SercosReadServiceDataFromSegments(\ti_dwIDN\t\t\t\t\t:= dwIDNCarrierLoad, \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ti_udiStraightIndex      := udiStraightIndex,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tq_dwDataStraightSegment\t=> dwMaxload, \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ti_udiCurveIndex\t\t    := udiCurveIndex,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tq_dwDataCurveSegment\t=> dwMaxload, \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ti_wMaxDataLength\t\t:= 4,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tiq_uiReadDataLen\t\t:= uiReadDataLen,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tiq_uiMaxReadDataLen\t\t:= uiMaxReadDataLen);\t\t\n\t\tIF diResultSercosReadServiceData = 0 THEN\n\t\t\tq_xReadParameterDone\t:= TRUE;\n\t\t\tdiState := 0;\n\t\tELSE\n\t\t\tq_xReadParameterError\t:= TRUE;\n\t\t\tdiState\t:= 1000;\n\t\tEND_IF\t\n\t\n\t//-------------------------------------------------------------------------------------------------------------------------------------------\n\t1000: //--- ErrorState\n\t\t;\n\t\nEND_CASE","LineInfoPersistence":"(string)d330fb2c-afc3-4523-841a-abb29e54790f_Impl_LineIds"}}}},"Interface":{"@Type":"a9ed5b7e","@Value":{"TextDocument":{"@Type":"f3878285","@Value":{"TextBlobForSerialisation":"(string)PROGRAM SR_ReadControlLoopParameter\n\nVAR_OUTPUT\n\tq_xReadParameterDone\t\t\t\t: BOOL;\n\tq_xReadParameterError\t\t\t\t: BOOL;\nEND_VAR\n\n\nVAR\n\tdwPosP_Straight\t\t\t\t: DWORD;\n\tdwVelP_Straight\t\t\t\t: DWORD;\n\tdwVelI_Straight\t\t\t\t: DWORD; \n\t\n\tdwPosP_Curve\t\t\t\t: DWORD;\n\tdwVelP_Curve\t\t\t\t: DWORD;\n\tdwVelI_Curve\t\t\t\t: DWORD; \n\n\txStart\t\t\t\t\t\t: BOOL;\n\tdiState\t\t\t\t\t\t: DINT;\n\t\n\t//-- Sercos IDNs\n\tdwIDNCarrierPosP\t\t\t\t\t: DWORD := SERC.FC_BuildIDN(0, 18, TRUE,  0, 1089); //P-0-1089.0.18 \n\tdwIDNCarrierVelP\t\t\t\t\t: DWORD := SERC.FC_BuildIDN(0, 15, TRUE,  0, 1089); //P-0-1089.0.15\n\tdwIDNCarrierVelI\t\t\t\t\t: DWORD := SERC.FC_BuildIDN(0, 16, TRUE,  0, 1089); //P-0-1089.0.16  \n\t\n \tdwIDNCarrierMaxcurr               \t: DWORD := SERC.FC_BuildIDN(0, 0,  TRUE,  0, 0208); //P-0-0208.0.0  \n    dwIDNCarrierLoad                  \t: DWORD := SERC.FC_BuildIDN(0, 14, TRUE,  0, 1089); //P-0-1089.0.14,    \n    dwIDNDeviationLevelWarning        \t: DWORD := SERC.FC_BuildIDN(0, 0,  TRUE,  0, 2014); //P-0-2014.0.0 Warning\n    dwIDNDeviationLevelError          \t: DWORD := SERC.FC_BuildIDN(0, 1,  TRUE,  0, 2014); //P-0-2014.0.1 Error\n\n\tdiResultSercosReadServiceData\t  \t: DINT;\t\n\n\tdwMaxCurr\t\t\t              \t: DWORD;\n    dwMaxload\t\t\t\t\t      \t: DWORD;\n    dwDeviationLevelWarning           \t: DWORD;\n    dwDeviationLevelError             \t: DWORD; \n\n\tuiReadDataLen\t\t\t\t\t\t: UINT;\n\tuiMaxReadDataLen\t\t\t\t\t: UINT;\n\tudiIndex\t\t\t\t\t\t\t: UDINT;\n\tudiStraightIndex\t\t\t\t\t: UDINT;\n\tudiCurveIndex\t\t\t\t\t\t: UDINT;\nEND_VAR\n","LineInfoPersistence":"(string)d330fb2c-afc3-4523-841a-abb29e54790f_Decl_LineIds"}}}},"UniqueIdGenerator":"(string)917","POULevel":{"@Type":"8e575c5b:Enum","@Value":"Standard"},"ChildObjectGuids":{"@Type":"ArrayList:IList","@Value":[]},"AddAttributeSubsequent":"(bool)False"}},"TypeInfos":{"0db3d7bb":"{0db3d7bb-cde0-4416-9a7b-ce49a0124323}","3b83b776":"{3b83b776-fb25-43b8-99f2-3c507c9143fc}","6f9dac99":"{6f9dac99-8de1-4efc-8465-68ac443b7d08}","8e575c5b":"{8e575c5b-1d37-49c6-941b-5c0ec7874787}","a9ed5b7e":"{a9ed5b7e-75c5-4651-af16-d2c27e98cb94}","ArrayList":"System.Collections.ArrayList","bool":"System.Boolean","f3878285":"{f3878285-8e4f-490b-bb1b-9acbb7eb04db}","string":"System.String"}}},"FormatVersion":"1.0"}