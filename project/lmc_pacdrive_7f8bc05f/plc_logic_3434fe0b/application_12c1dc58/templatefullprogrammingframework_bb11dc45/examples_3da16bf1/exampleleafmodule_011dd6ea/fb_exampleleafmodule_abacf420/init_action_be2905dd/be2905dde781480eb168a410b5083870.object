{"payload":{"meta":{"Graph":{"@Type":"81297157","@Value":{"Guid":"(Guid)be2905dd-e781-480e-b168-a410b5083870","ParentGuid":"(Guid)abacf420-6692-4371-b169-bbd6e5873750","Name":"(string)Init_Action","Properties":{"@Type":"2c41fa04:IDictionary","@Value":{}},"TypeGuid":"(Guid)8ac092e5-3128-4e26-9e7e-11016c6684f2","EmbeddedTypeGuids":{"@Type":"[Guid]","@Value":["(Guid)3b83b776-fb25-43b8-99f2-3c507c9143fc"]}}},"TypeInfos":{"2c41fa04":"{2c41fa04-1834-41c1-816e-303c7aa2c05b}","81297157":"{81297157-7ec9-45ce-845e-84cab2b88ade}","Guid":"System.Guid","string":"System.String"}},"object":{"Graph":{"@Type":"8ac092e5","@Value":{"Implementation":{"@Type":"3b83b776","@Value":{"TextDocument":{"@Type":"f3878285","@Value":{"TextBlobForSerialisation":"(string)iq_stStandardModuleItf.q_xActive\t\t\t:= FALSE;\niq_stStandardModuleItf.q_xReady\t\t\t\t:= FALSE;\n\niq_stStandardModuleItf.q_etDiag\t\t\t\t:= GD.ET_Diag.Ok;\niq_stStandardModuleItf.q_udiDiagExt\t\t\t:= ET_DiagExtExampleLeafModule.Disabled;\niq_stStandardModuleItf.q_sDiagExt\t\t\t:= FC_EtDiagExtExampleLeafModuleToString(i_etDiagExt := iq_stStandardModuleItf.q_udiDiagExt);\niq_stStandardModuleItf.q_sMsg\t\t\t\t:= '';\n\niq_stStandardModuleItf.q_dwModuleType\t\t:= ET_ModuleType.ExampleLeafModule;\niq_stStandardModuleItf.q_sModuleTypeName\t:= 'ExampleLeafModule';\niq_stStandardModuleItf.q_udiModuleVersion\t:= 1;\n\niq_stExampleLeafModuleItf.q_etState\t:= ET_ExampleLeafModuleState.Disabled;\n\nTHIS^.DiagQuit();\nTHIS^.InactiveCmdExecution();\n\nudiMyResultSource := ET_ExceptionSource.ExampleLeafModule; (* Has to be coded this way to get around compiler restrictions*)\n\n(* detect invalid configurations and avoid array index out of range error *)\nIF(iq_stStandardModuleItf.iq_stExt.udiReactionOffset + TPL. ET_Reaction.MainsContactorOff > TPL.Gc_udiMaxNumberOfReactions) OR xExceptionReactionOutsideRange THEN (* module uses error reactions 1 to 5 *)\n\txExceptionReactionOutsideRange := TRUE; (* create unquittable error *)\n\t\n\t(* create exception *)\n\tstExceptionInit.etDiag\t\t\t\t\t:= GD.ET_Diag.InputParameterInvalid;\n\tstExceptionInit.udiDiagExt\t\t\t\t:= ET_DiagExtExampleLeafModule.ReactionOffsetRange;\n\tstExceptionInit.sMsg\t\t\t\t\t:= Standard.CONCAT('Value: ', UDINT_TO_STRING(iq_stStandardModuleItf.iq_stExt.udiReactionOffset));\n\tstExceptionInit.udiModuleId\t\t\t\t:= iq_stStandardModuleItf.i_udiModuleId;\n\tstExceptionInit.sModuleName\t\t\t\t:= iq_stStandardModuleItf.i_sModuleName;\n\tstExceptionInit.etSource\t\t\t\t:= udiMyResultSource;\n\tstExceptionInit.timDelayTime\t\t\t:= T#0MS;\n\tstExceptionInit.wHmiAttributes\t\t\t:= 0;\n\tstExceptionInit.xAutoQuit\t\t\t\t:= FALSE;\n\tstExceptionInit.stReaction.axReaction[TPL.ET_Reaction.AsyncStop]\t:= TRUE; (* without offset on purpose *)\n\t\n\tiq_stStandardModuleItf.iq_stExt.udiReactionOffset := 0;\n\t\n\tReportException(iq_stException := stExceptionInit);\nELSIF (iq_stStandardModuleItf.i_xEnable) THEN\n\tstReaction1 := stEmptyReaction;\n\tstReaction1.axReaction[iq_stStandardModuleItf.iq_stExt.udiReactionOffset + TPL.ET_Reaction.AsyncStop] := TRUE;\n\tstReaction2 := stEmptyReaction;\n\tstReaction2.axReaction[iq_stStandardModuleItf.iq_stExt.udiReactionOffset + TPL.ET_Reaction.SyncStopEL] := TRUE;\n\tstReaction3 := stEmptyReaction;\n\tstReaction3.axReaction[iq_stStandardModuleItf.iq_stExt.udiReactionOffset + TPL.ET_Reaction.SyncStopEH] := TRUE;\n\tstReaction4 := stEmptyReaction;\n\tstReaction4.axReaction[iq_stStandardModuleItf.iq_stExt.udiReactionOffset + TPL.ET_Reaction.StopEndOfCycle] := TRUE;\n\t\n\t(* Initialization of exception structures *)\n\tstExceptionCmdUnknown.etDiag\t\t\t\t\t\t:= GD.ET_Diag.ExecutionAborted;\n\tstExceptionCmdUnknown.udiDiagExt\t\t\t\t\t:= ET_DiagExtExampleLeafModule.CmdUnknown;\n\tstExceptionCmdUnknown.sMsg\t\t\t\t\t\t\t:= 'Command unknown'; (* Replaced on usage *)\n\tstExceptionCmdUnknown.udiModuleId\t\t\t\t\t:= iq_stStandardModuleItf.i_udiModuleId;\n\tstExceptionCmdUnknown.sModuleName\t\t\t\t\t:= iq_stStandardModuleItf.i_sModuleName;\n\tstExceptionCmdUnknown.etSource\t\t\t\t\t\t:= udiMyResultSource;\n\tstExceptionCmdUnknown.timDelayTime\t\t\t\t\t:= T#0MS;\n\tstExceptionCmdUnknown.wHmiAttributes\t\t\t\t:= 0;\n\tstExceptionCmdUnknown.xAutoQuit\t\t\t\t\t\t:= FALSE;\n\tstExceptionCmdUnknown.stReaction\t\t\t\t\t:= stReaction1;\n\n\tstExceptionCmdImpossibleOverwrite.etDiag\t\t\t:= GD.ET_Diag.ExecutionAborted;\n\tstExceptionCmdImpossibleOverwrite.udiDiagExt\t\t:= ET_DiagExtExampleLeafModule.CmdImpossibleOverwrite;\n\tstExceptionCmdImpossibleOverwrite.sMsg\t\t\t\t:= 'Impossible command overwrite'; (* Replaced on usage *)\n\tstExceptionCmdImpossibleOverwrite.udiModuleId\t\t:= iq_stStandardModuleItf.i_udiModuleId;\n\tstExceptionCmdImpossibleOverwrite.sModuleName\t\t:= iq_stStandardModuleItf.i_sModuleName;\n\tstExceptionCmdImpossibleOverwrite.etSource\t\t\t:= udiMyResultSource;\n\tstExceptionCmdImpossibleOverwrite.timDelayTime\t\t:= T#0MS;\n\tstExceptionCmdImpossibleOverwrite.wHmiAttributes\t:= 0;\n\tstExceptionCmdImpossibleOverwrite.xAutoQuit\t\t\t:= FALSE;\n\tstExceptionCmdImpossibleOverwrite.stReaction\t\t:= stReaction1;\n\t\n\tstExceptionCmdImpossibleState.etDiag\t\t\t\t:= GD.ET_Diag.ExecutionAborted;\n\tstExceptionCmdImpossibleState.udiDiagExt\t\t\t:= ET_DiagExtExampleLeafModule.CmdImpossibleState;\n\tstExceptionCmdImpossibleState.sMsg\t\t\t\t\t:= 'Impossible command for state'; (* Replaced on usage *)\n\tstExceptionCmdImpossibleState.udiModuleId\t\t\t:= iq_stStandardModuleItf.i_udiModuleId;\n\tstExceptionCmdImpossibleState.sModuleName\t\t\t:= iq_stStandardModuleItf.i_sModuleName;\n\tstExceptionCmdImpossibleState.etSource\t\t\t\t:= udiMyResultSource;\n\tstExceptionCmdImpossibleState.timDelayTime\t\t\t:= T#0MS;\n\tstExceptionCmdImpossibleState.wHmiAttributes\t\t:= 0;\n\tstExceptionCmdImpossibleState.xAutoQuit\t\t\t\t:= FALSE;\n\tstExceptionCmdImpossibleState.stReaction\t\t\t:= stReaction1;\n\n\tstWarningCmdImpossibleReaction.etDiag\t\t\t\t:= GD.ET_Diag.ExecutionAborted;\n\tstWarningCmdImpossibleReaction.udiDiagExt\t\t\t:= ET_DiagExtExampleLeafModule.CmdImpossibleReaction;\n\tstWarningCmdImpossibleReaction.sMsg\t\t\t\t\t:= 'Impossible command on reaction'; (* Replaced on usage *)\n\tstWarningCmdImpossibleReaction.udiModuleId\t\t\t:= iq_stStandardModuleItf.i_udiModuleId;\n\tstWarningCmdImpossibleReaction.sModuleName\t\t\t:= iq_stStandardModuleItf.i_sModuleName;\n\tstWarningCmdImpossibleReaction.etSource\t\t\t\t:= udiMyResultSource;\n\tstWarningCmdImpossibleReaction.timDelayTime\t\t\t:= T#0MS;\n\tstWarningCmdImpossibleReaction.wHmiAttributes\t\t:= 0;\n\tstWarningCmdImpossibleReaction.xAutoQuit\t\t\t:= FALSE;\n\t\n\tstExceptionModuleReaction1.etDiag\t\t\t\t\t:= GD.ET_Diag.InputParameterInvalid;(* Replaced on usage *)\n\tstExceptionModuleReaction1.udiDiagExt\t\t\t\t:= ET_DiagExtExampleLeafModule.Ok;(* Replaced on usage *)\n\tstExceptionModuleReaction1.sMsg\t\t\t\t\t\t:= '';(* Replaced on usage *)\n\tstExceptionModuleReaction1.udiModuleId\t\t\t\t:= iq_stStandardModuleItf.i_udiModuleId;\n\tstExceptionModuleReaction1.sModuleName\t\t\t\t:= iq_stStandardModuleItf.i_sModuleName;\n\tstExceptionModuleReaction1.etSource\t\t\t\t\t:= udiMyResultSource;\n\tstExceptionModuleReaction1.timDelayTime\t\t\t\t:= T#0MS;\n\tstExceptionModuleReaction1.wHmiAttributes\t\t\t:= 0;\n\tstExceptionModuleReaction1.xAutoQuit\t\t\t\t:= FALSE;\n\tstExceptionModuleReaction1.stReaction\t\t\t\t:= stReaction1;\n\n\tstExceptionModuleReaction2.etDiag\t\t\t\t\t:= GD.ET_Diag.InputParameterInvalid;(* Replaced on usage *)\n\tstExceptionModuleReaction2.udiDiagExt\t\t\t\t:= ET_DiagExtExampleLeafModule.Ok;(* Replaced on usage *)\n\tstExceptionModuleReaction2.sMsg\t\t\t\t\t\t:= '';(* Replaced on usage *)\n\tstExceptionModuleReaction2.udiModuleId\t\t\t\t:= iq_stStandardModuleItf.i_udiModuleId;\n\tstExceptionModuleReaction2.sModuleName\t\t\t\t:= iq_stStandardModuleItf.i_sModuleName;\n\tstExceptionModuleReaction2.etSource\t\t\t\t\t:= udiMyResultSource;\n\tstExceptionModuleReaction2.timDelayTime\t\t\t\t:= T#0MS;\n\tstExceptionModuleReaction2.wHmiAttributes\t\t\t:= 0;\n\tstExceptionModuleReaction2.xAutoQuit\t\t\t\t:= FALSE;\n\tstExceptionModuleReaction2.stReaction\t\t\t\t:= stReaction2;\n\n\tstExceptionModuleReaction3.etDiag\t\t\t\t\t:= GD.ET_Diag.InputParameterInvalid;(* Replaced on usage *)\n\tstExceptionModuleReaction3.udiDiagExt\t\t\t\t:= ET_DiagExtExampleLeafModule.Ok;(* Replaced on usage *)\n\tstExceptionModuleReaction3.sMsg\t\t\t\t\t\t:= '';(* Replaced on usage *)\n\tstExceptionModuleReaction3.udiModuleId\t\t\t\t:= iq_stStandardModuleItf.i_udiModuleId;\n\tstExceptionModuleReaction3.sModuleName\t\t\t\t:= iq_stStandardModuleItf.i_sModuleName;\n\tstExceptionModuleReaction3.etSource\t\t\t\t\t:= udiMyResultSource;\n\tstExceptionModuleReaction3.timDelayTime\t\t\t\t:= T#0MS;\n\tstExceptionModuleReaction3.wHmiAttributes\t\t\t:= 0;\n\tstExceptionModuleReaction3.xAutoQuit\t\t\t\t:= FALSE;\n\tstExceptionModuleReaction3.stReaction\t\t\t\t:= stReaction3;\n\n\tstExceptionModuleReaction4.etDiag\t\t\t\t\t:= GD.ET_Diag.InputParameterInvalid;(* Replaced on usage *)\n\tstExceptionModuleReaction4.udiDiagExt\t\t\t\t:= ET_DiagExtExampleLeafModule.Ok;(* Replaced on usage *)\n\tstExceptionModuleReaction4.sMsg\t\t\t\t\t\t:= '';(* Replaced on usage *)\n\tstExceptionModuleReaction4.udiModuleId\t\t\t\t:= iq_stStandardModuleItf.i_udiModuleId;\n\tstExceptionModuleReaction4.sModuleName\t\t\t\t:= iq_stStandardModuleItf.i_sModuleName;\n\tstExceptionModuleReaction4.etSource\t\t\t\t\t:= udiMyResultSource;\n\tstExceptionModuleReaction4.timDelayTime\t\t\t\t:= T#0MS;\n\tstExceptionModuleReaction4.wHmiAttributes\t\t\t:= 0;\n\tstExceptionModuleReaction4.xAutoQuit\t\t\t\t:= FALSE;\n\tstExceptionModuleReaction4.stReaction\t\t\t\t:= stReaction4;\n\t\n\tstExceptionDriveFatal.etDiag\t\t\t\t\t\t:= GD.ET_Diag.DriveConditionInvalid;\n\tstExceptionDriveFatal.udiDiagExt\t\t\t\t\t:= ET_DiagExtExampleLeafModule.DriveFatalException;\n\tstExceptionDriveFatal.sMsg\t\t\t\t\t\t\t:= 'Drive diag'; (* Replaced on usage *)\n\tstExceptionDriveFatal.udiModuleId\t\t\t\t\t:= iq_stStandardModuleItf.i_udiModuleId;\n\tstExceptionDriveFatal.sModuleName\t\t\t\t\t:= iq_stStandardModuleItf.i_sModuleName;\n\tstExceptionDriveFatal.etSource\t\t\t\t\t\t:= udiMyResultSource;\n\tstExceptionDriveFatal.timDelayTime\t\t\t\t\t:= T#0MS;\n\tstExceptionDriveFatal.wHmiAttributes\t\t\t\t:= 0;\n\tstExceptionDriveFatal.xAutoQuit\t\t\t\t\t\t:= FALSE;\n\tstExceptionDriveFatal.stReaction\t\t\t\t\t:= stReaction1;\n\t\n\tstExcepitonDrive.etDiag\t\t\t\t\t\t\t\t:= GD.ET_Diag.DriveConditionInvalid;\n\tstExcepitonDrive.udiDiagExt\t\t\t\t\t\t\t:= ET_DiagExtExampleLeafModule.DriveException;\n\tstExcepitonDrive.sMsg\t\t\t\t\t\t\t\t:= 'Drive diag'; (* Replaced on usage *)\n\tstExcepitonDrive.udiModuleId\t\t\t\t\t\t:= iq_stStandardModuleItf.i_udiModuleId;\n\tstExcepitonDrive.sModuleName\t\t\t\t\t\t:= iq_stStandardModuleItf.i_sModuleName;\n\tstExcepitonDrive.etSource\t\t\t\t\t\t\t:= udiMyResultSource;\n\tstExcepitonDrive.timDelayTime\t\t\t\t\t\t:= T#0MS;\n\tstExcepitonDrive.wHmiAttributes\t\t\t\t\t\t:= 0;\n\tstExcepitonDrive.xAutoQuit\t\t\t\t\t\t\t:= FALSE;\n\tstExcepitonDrive.stReaction\t\t\t\t\t\t\t:= stReaction2;\n\n\tstWarningDrive.etDiag\t\t\t\t\t\t\t\t:= GD.ET_Diag.DriveConditionInvalid;\n\tstWarningDrive.udiDiagExt\t\t\t\t\t\t\t:= ET_DiagExtExampleLeafModule.DriveWarning;\n\tstWarningDrive.sMsg\t\t\t\t\t\t\t\t\t:= 'Drive warning'; (* Replaced on usage *)\n\tstWarningDrive.udiModuleId\t\t\t\t\t\t\t:= iq_stStandardModuleItf.i_udiModuleId;\n\tstWarningDrive.sModuleName\t\t\t\t\t\t\t:= iq_stStandardModuleItf.i_sModuleName;\n\tstWarningDrive.etSource\t\t\t\t\t\t\t\t:= udiMyResultSource;\n\tstWarningDrive.timDelayTime\t\t\t\t\t\t\t:= T#0MS;\n\tstWarningDrive.wHmiAttributes\t\t\t\t\t\t:= 0;\n\tstWarningDrive.xAutoQuit\t\t\t\t\t\t\t:= FALSE;\n\tstWarningDrive.stReaction\t\t\t\t\t\t\t:= stReaction4;\n\n\tstExceptionInit.etDiag\t\t\t\t\t\t\t\t:= GD.ET_Diag.InputParameterInvalid; (* Replaced on usage *)\n\tstExceptionInit.udiDiagExt\t\t\t\t\t\t\t:= ET_DiagExtExampleLeafModule.Ok; (* Replaced on usage *)\n\tstExceptionInit.sMsg\t\t\t\t\t\t\t\t:= ''; (* Replaced on usage *)\n\tstExceptionInit.udiModuleId\t\t\t\t\t\t\t:= iq_stStandardModuleItf.i_udiModuleId;\n\tstExceptionInit.sModuleName\t\t\t\t\t\t\t:= iq_stStandardModuleItf.i_sModuleName;\n\tstExceptionInit.etSource\t\t\t\t\t\t\t:= udiMyResultSource;\n\tstExceptionInit.timDelayTime\t\t\t\t\t\t:= T#0MS;\n\tstExceptionInit.wHmiAttributes\t\t\t\t\t\t:= 0;\n\tstExceptionInit.xAutoQuit\t\t\t\t\t\t\t:= FALSE;\n\tstExceptionInit.stReaction\t\t\t\t\t\t\t:= stReaction1;\n\t\n\tstExceptionHoming.etDiag\t\t\t\t\t\t\t:= GD.ET_Diag.HomingFailed;\n\tstExceptionHoming.udiDiagExt\t\t\t\t\t\t:= ET_DiagExtExampleLeafModule.RandomException;\n\tstExceptionHoming.sMsg\t\t\t\t\t\t\t\t:= '';\n\tstExceptionHoming.udiModuleId\t\t\t\t\t\t:= iq_stStandardModuleItf.i_udiModuleId;\n\tstExceptionHoming.sModuleName\t\t\t\t\t\t:= iq_stStandardModuleItf.i_sModuleName;\n\tstExceptionHoming.etSource\t\t\t\t\t\t\t:= udiMyResultSource;\n\tstExceptionHoming.timDelayTime\t\t\t\t\t\t:= T#0MS;\n\tstExceptionHoming.wHmiAttributes\t\t\t\t\t:= 0;\n\tstExceptionHoming.xAutoQuit\t\t\t\t\t\t\t:= FALSE;\n\tstExceptionHoming.stReaction\t\t\t\t\t\t:= stReaction4;\n\n\tIF (iq_stExampleLeafModuleItf.i_ifDrive = 0) THEN\n\t\tstExceptionModuleReaction1.etDiag\t\t:= GD.ET_Diag.InputParameterInvalid;\n\t\tstExceptionModuleReaction1.udiDiagExt\t:= ET_DiagExtExampleLeafModule.DriveInvalid;\n\t\tstExceptionModuleReaction1.sMsg\t\t\t:= 'No drive given';\n\t\t\n\t\tReportException(iq_stException := stExceptionModuleReaction1);\n\tELSE\n\t\txEnableFlag := TRUE;\n\t\tiq_stStandardModuleItf.q_xActive := TRUE;\n\t\t\n\t\tFOR udii := 1 TO TPL.Gc_udiMaxNumberOfReactions DO\n\t\t\tstLocalReaction.axReaction[udii] := FALSE;\n\t\tEND_FOR\n\t\t\n\t\tTHIS^.SetInterfaces();\n\t\t\n\t\txInitHomingDone := FALSE;\n\t\t\n\t\tiq_stExampleLeafModuleItf.q_etState := ET_ExampleLeafModuleState.Initializing;\n\t\t\n\t\tiq_stStandardModuleItf.q_etDiag\t\t:= GD.ET_Diag.Ok;\n\t\tiq_stStandardModuleItf.q_udiDiagExt\t:= ET_DiagExtExampleLeafModule.Initializing;\n\t\tiq_stStandardModuleItf.q_sDiagExt\t:= FC_EtDiagExtExampleLeafModuleToString(ET_DiagExtExampleLeafModule.Initializing);\n\t\tiq_stStandardModuleItf.q_sMsg\t\t:= '';\n\t\t\n\t\tIF fbLoggerPoint.etLogLevel >= APL.ET_LogLevel.UserAction THEN\n\t\t\tfbLoggerPoint.AddLogEntry(\ti_etLogLevel\t:= APL.ET_LogLevel.UserAction,\n\t\t\t\t\t\t\t\t\t\ti_etDiag\t\t:= GD.ET_Diag.Ok,\n\t\t\t\t\t\t\t\t\t\ti_udiDiagExt\t:= ET_DiagExtExampleLeafModule.Ok,\n\t\t\t\t\t\t\t\t\t\ti_sMessage\t\t:= 'enabeling Module',\n\t\t\t\t\t\t\t\t\t\tq_etDiag\t\t:= ,\n\t\t\t\t\t\t\t\t\t\tq_etDiagExt\t\t:= );\n\t\tEND_IF\n\tEND_IF\n\nEND_IF\n\nTHIS^.SetOutputs();","LineInfoPersistence":"(string)be2905dd-e781-480e-b168-a410b5083870_Impl_LineIds"}}}},"UniqueIdGenerator":"(string)611"}},"TypeInfos":{"3b83b776":"{3b83b776-fb25-43b8-99f2-3c507c9143fc}","8ac092e5":"{8ac092e5-3128-4e26-9e7e-11016c6684f2}","f3878285":"{f3878285-8e4f-490b-bb1b-9acbb7eb04db}","string":"System.String"}}},"FormatVersion":"1.0"}