{"payload":{"meta":{"Graph":{"@Type":"81297157","@Value":{"Guid":"(Guid)b7e86ec8-c129-4b58-a21d-3154a69b22e9","ParentGuid":"(Guid)28af8f28-add1-40f0-881f-036441eaaef2","Name":"(string)ControlEnable","Properties":{"@Type":"2c41fa04:IDictionary","@Value":{}},"TypeGuid":"(Guid)8ac092e5-3128-4e26-9e7e-11016c6684f2","EmbeddedTypeGuids":{"@Type":"[Guid]","@Value":["(Guid)3b83b776-fb25-43b8-99f2-3c507c9143fc"]}}},"TypeInfos":{"2c41fa04":"{2c41fa04-1834-41c1-816e-303c7aa2c05b}","81297157":"{81297157-7ec9-45ce-845e-84cab2b88ade}","Guid":"System.Guid","string":"System.String"}},"object":{"Graph":{"@Type":"8ac092e5","@Value":{"Implementation":{"@Type":"3b83b776","@Value":{"TextDocument":{"@Type":"f3878285","@Value":{"TextBlobForSerialisation":"(string)IF \t\tNOT xControlEnable \n\tAND iStateControlEnable > 0 \n\tAND iStateControlEnable < 200 \nTHEN\n\tiStateControlEnable\t:= 200;\n\t\nELSIF xControlEnable AND iStateControlEnable = 0 \nTHEN\n\tiStateControlEnable\t:= 10;\nEND_IF\n\nfbTonTimeOutControlEnable(IN := xCheckTimeOutControlEnable, PT := timTimeoutControlEnable);\n\nCASE iStateControlEnable OF\n//-------------------------------------------------------------------------------------------------------------------------------------------\n//--- Enable --------------------------------------------------------------------------------------------------------------------------------\n//-------------------------------------------------------------------------------------------------------------------------------------------\n\n\t//-------------------------------------------------------------------------------------------------------------------------------------------\n\t0: \t//--- Wait for ControlEnable = TRUE\n\t\txCheckTimeOutControlEnable\t:= FALSE;\n\t\t\n\t//-------------------------------------------------------------------------------------------------------------------------------------------\n\t10:\t//--- Enable Track\n\t\txEnableTrackSuccessful\t:= FALSE;\n\t\t\n\t\tiq_stMulticarrierModule.i_ifMulticarrierTrackEnable.EnableSet := TRUE;\n\t\txCheckTimeOutControlEnable\t:= TRUE;\n\t\t\n\t\tiStateControlEnable\t\t:= 20;\n\t\t\n\t//-------------------------------------------------------------------------------------------------------------------------------------------\n\t20: //--- Wait for Track is completly Enabled\n\t\tIF iq_stMulticarrierModule.i_ifMulticarrierTrackEnable.State = 1 THEN\n\t\t\txCheckTimeOutControlEnable\t:= FALSE;\n\t\t\t// Enable the FB_Multicarrier\n\t\t\txEnableFbMulticarrier\t\t:= TRUE;\n\t\t\txStartFbMulticarrier\t\t:= TRUE;\n\t\t\tiStateControlEnable\t\t\t:= 30;\n\t\t\t\n\t\tEND_IF\n\t\t\n\t//-------------------------------------------------------------------------------------------------------------------------------------------\n\t30: //--- Wait for FB_Multicarrier active \n\t\tIF astSubModuleInterface[c_udiMultiCarrierTrack].q_xActive AND astSubModuleInterface[c_udiMultiCarrierTrack].q_xReady\n\t\tTHEN\n\t\t\txEnableFbCrashPrevention\t:= GVL_Project.Gc_xEnableCrashPrevention;\n\t\t\tiStateControlEnable\t\t\t:= 40;\n\t\tEND_IF\n\t\t\n\t//-------------------------------------------------------------------------------------------------------------------------------------------\n\t40: //--- Check for Ready FB_Multicarrier\n\t\tIF NOT astSubModuleInterface[c_udiMultiCarrierTrack].q_xException AND astSubModuleInterface[c_udiMultiCarrierTrack].q_xReady THEN\n\t\t\tiStateControlEnable\t\t:= 50;\n\t\tEND_IF\n\t\t\n\t//-------------------------------------------------------------------------------------------------------------------------------------------\n\t50: //--- xEnableTrackSuccessful\t\n\t\txEnableTrackSuccessful\t:= TRUE;\n\n\t\n//-------------------------------------------------------------------------------------------------------------------------------------------\t\n//--- Disable -------------------------------------------------------------------------------------------------------------------------------\n//-------------------------------------------------------------------------------------------------------------------------------------------\n\n\t//-------------------------------------------------------------------------------------------------------------------------------------------\n\t200:\t//--- Disable FB_Multicarrier\n\t\txEnableTrackSuccessful := FALSE;\n\t\t\n\t\tiStateControlEnable\t\t\t:= 210;\n\t\txEnableFbMulticarrier\t\t:= FALSE;\n\t\txStartFbMulticarrier\t\t:= FALSE;\n\t\txEnableFbCrashPrevention\t:= FALSE;\n\t\txEnableFbTrackCalibration\t:= FALSE;\n\t\txStartFbTrackCalibration\t:= FALSE;\n\t\t\n\t\tdiTimerStopOpmode\t\t\t:= LMC_PacDrive.Timer1;\n\t\t\n\t//-------------------------------------------------------------------------------------------------------------------------------------------\t\n\t210:\t//--- Check FB_Multicarrier is disabled\n\t\tIF\t\tNOT astSubModuleInterface[c_udiMultiCarrierTrack].q_xActive \n\t\t\tAND NOT astSubModuleInterface[c_udiMultiCarrierTrack].q_xReady \n\t\t\tAND NOT ifMulticarrier.ifFeedback.xMotionActiveAnyCarrier \n\t\t\tAND LMC_PacDrive.Timer1 > diTimerStopOpmode + diWaitTimeSetCarrierEnableFalse\n\t\tTHEN\n\t\t\tiStateControlEnable\t\t:= 220;\n\t\tEND_IF\n\t\t\n\t\n\t//-------------------------------------------------------------------------------------------------------------------------------------------\t\n\t220:\t//--- Disable Segments and Carrier\n\t\tiq_stMulticarrierModule.i_ifMulticarrierTrackEnable.EnableSet := FALSE;\n\t\txCheckTimeOutControlEnable\t:= TRUE;\n\t\t\n\t\tiStateControlEnable\t\t:= 230;\n\t\t\n\t//-------------------------------------------------------------------------------------------------------------------------------------------\n\t230: //--- Check Segments and Carrier are disabled\n\t\tIF iq_stMulticarrierModule.i_ifMulticarrierTrackEnable.State = 0\n\t\tTHEN\t\n\t\t\tiStateControlEnable\t\t:= 400;\n\t\tEND_IF\n\t\n\t//-------------------------------------------------------------------------------------------------------------------------------------------\n\t400: //--- StopOpModeSuccessful\n\t\tIF NOT ifMulticarrier.ifFeedback.xMotionActiveAnyCarrier THEN\n\t\t\txEnableFbMulticarrier\t\t:= FALSE;\n\t\t\txStartFbMulticarrier\t\t:= FALSE;\n\t\t\t\n\t\t\tiStateControlEnable\t\t:= 0;\n\t\tEND_IF\n\nEND_CASE","LineInfoPersistence":"(string)b7e86ec8-c129-4b58-a21d-3154a69b22e9_Impl_LineIds"}}}},"UniqueIdGenerator":"(string)969"}},"TypeInfos":{"3b83b776":"{3b83b776-fb25-43b8-99f2-3c507c9143fc}","8ac092e5":"{8ac092e5-3128-4e26-9e7e-11016c6684f2}","f3878285":"{f3878285-8e4f-490b-bb1b-9acbb7eb04db}","string":"System.String"}}},"FormatVersion":"1.0"}