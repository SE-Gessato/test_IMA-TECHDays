{"payload":{"meta":{"Graph":{"@Type":"81297157","@Value":{"Guid":"(Guid)85ad2e12-cc41-46ee-83a2-56d432fdbe91","ParentGuid":"(Guid)0403b0ba-733f-43db-97c2-48be15d20a04","Name":"(string)WriteStationDataFromVis","Properties":{"@Type":"2c41fa04:IDictionary","@Value":{}},"TypeGuid":"(Guid)8ac092e5-3128-4e26-9e7e-11016c6684f2","EmbeddedTypeGuids":{"@Type":"[Guid]","@Value":["(Guid)3b83b776-fb25-43b8-99f2-3c507c9143fc"]}}},"TypeInfos":{"2c41fa04":"{2c41fa04-1834-41c1-816e-303c7aa2c05b}","81297157":"{81297157-7ec9-45ce-845e-84cab2b88ade}","Guid":"System.Guid","string":"System.String"}},"object":{"Graph":{"@Type":"8ac092e5","@Value":{"Implementation":{"@Type":"3b83b776","@Value":{"TextDocument":{"@Type":"f3878285","@Value":{"TextBlobForSerialisation":"(string)//--- Write Station Parameter --------------------------------------\n\tIF xSetParameterLoad THEN\n\t\txSetParameterLoad := FALSE;\n\t\tfbLoadPlayGround.SetMotionParameter(\n\t\t\ti_lrMaxVelocity\t\t\t\t:= lrMaxVelocityLoad,\n\t\t\ti_lrMaxAcceleration\t\t\t:= lrMaxAccLoad,\n\t\t\ti_lrMaxDeceleration\t\t\t:= lrMaxDecLoad,\n\t\t\ti_lrMaxJerk\t\t\t\t\t:= lrMaxJerkLoad);\n\t\t\t\n\t\tfbLoadPlayGround.SetStationParameter(\n\t\t\ti_udiStationId\t\t\t\t:= 1,\n\t\t\ti_ifTargetStation\t\t\t:= fbUnLoadPlayGround,\n\t\t\ti_lrProcessPosition \t\t:= lrProcessStartPosInStationLoad,\n\t\t\ti_lrProcessGap \t \t\t\t:= lrProcessGapInStationLoad,\n\t\t\ti_lrWaitPostion\t\t\t\t:= lrWaitStationPositionLoad,\n\t\t\ti_lrWaitGap     \t \t\t:= lrQueueGapStationLoad,\n\t\t\ti_etStationType\t\t\t\t:= ET_StationType.Load);\n\t\t\t\n\t\tfbLoadPlayGround.SetAdditionalParameter(\n\t\t\ti_xKeepProcessGapWhenLeaveStation\t:= xKeepGapWhenLeaveStation,\n\t\t\ti_xMoveSyncWhenLeaveStation\t\t\t:= xMoveSyncWhenLeaveStation,\n\t\t\ti_xWithCurveCompensation\t\t\t:= xWithCurveCompensation,\n\t\t\ti_udiNrOfCarrierInProcess\t \t\t:= udiNumberOfCarrierInStationLoad);\n\t\t\t\n\tEND_IF\n\t\n\tIF xSetParameterUnLoad OR_ELSE (xMoveSyncWhenLeaveStation AND udiNumberOfCarrierInStationUnLoad <> udiNumberOfCarrierInStationLoad) THEN\n\t\t\n\t\txSetParameterUnLoad := FALSE;\n\t\tfbUnLoadPlayGround.SetMotionParameter(\n\t\t\ti_lrMaxVelocity\t\t \t:= lrMaxVelocityUnLoad,\n\t\t\ti_lrMaxAcceleration\t\t:= lrMaxAccUnLoad,\n\t\t\ti_lrMaxDeceleration\t\t:= lrMaxDecUnLoad,\n\t\t\ti_lrMaxJerk\t\t\t  \t:= lrMaxJerkUnLoad);\n\t\t\n\t\tIF xMoveSyncWhenLeaveStation AND udiNumberOfCarrierInStationUnLoad <> udiNumberOfCarrierInStationLoad THEN\n\t\t\tudiNumberOfCarrierInStationUnLoad := udiNumberOfCarrierInStationLoad;\n\t\tEND_IF\n\t\t\n\t\tfbUnLoadPlayGround.SetStationParameter(\n\t\t\ti_udiStationId\t\t\t:= 2,\n\t\t\ti_ifTargetStation\t\t:= fbLoadPlayGround,\n\t\t\ti_lrProcessPosition  \t:= lrProcessStartPosInStationUnLoad,\n\t\t\ti_lrProcessGap \t \t\t:= lrProcessGapInStationUnLoad,\n\t\t\ti_lrWaitPostion\t \t\t:= lrWaitStationPositionUnLoad,\n\t\t\ti_lrWaitGap     \t \t:= lrQueueGapStationUnLoad,\n\t\t\ti_etStationType\t\t\t:= ET_StationType.Unload);\n\t\t\n\t\tfbUnLoadPlayGround.SetAdditionalParameter(\n\t\t\ti_xKeepProcessGapWhenLeaveStation\t := FALSE,\n\t\t\ti_xMoveSyncWhenLeaveStation\t\t\t := FALSE,\n\t\t\ti_xWithCurveCompensation\t\t\t := FALSE,\n\t\t\ti_udiNrOfCarrierInProcess\t \t\t := udiNumberOfCarrierInStationUnLoad);\n\t\t\t\n\tEND_IF\t\t\n\n\nfbLoadPlayGround.xActivateAPLEntriesForMovedCarriers  \t\t:= xApplicationLoggerEntriesActiveLoad;\nfbLoadPlayGround.xEnableActivationOfAPLEntriesForCarriers \t:= GVL_Project.G_xEnableAplEntriesViaStation;\n    \nfbUnLoadPlayGround.xActivateAPLEntriesForMovedCarriers  \t\t:= xApplicationLoggerEntriesActiveunLoad;\nfbUnLoadPlayGround.xEnableActivationOfAPLEntriesForCarriers \t:= GVL_Project.G_xEnableAplEntriesViaStation;\n   \n//\n//--- Write Error Message in Vis --------------------------------------\n\tIF fbLoadPlayGround.xError THEN\n\t\txError \t\t:= fbLoadPlayGround.xError;\n\t\tsResultMsg \t:= fbLoadPlayGround.sResultMsg;\n\t\tsEtResult \t:= fbLoadPlayGround.sEtResult;\n\tEND_IF\n\t\n\tIF fbUnLoadPlayGround.xError THEN\n\t\txError \t\t:= fbUnLoadPlayGround.xError;\n\t\tsResultMsg \t:= fbUnLoadPlayGround.sResultMsg;\n\t\tsEtResult \t:= fbUnLoadPlayGround.sEtResult;\n\tEND_IF\n//\n   \nIF NOT xUseStations THEN \n\t// --- Emulation ---\n\t\t\n\t\t\n\t\tGVL_Project.G_astEmulationStations[1].sTextLabel\t\t:= '';\n\t\tGVL_Project.G_astEmulationStations[1].lrWaitPosition \t:= 0;\n\t\tGVL_Project.G_astEmulationStations[1].lrProcessPosition\t:= 0;\n\t\tGVL_Project.G_astEmulationStations[1].udiColor\t\t\t:= DTC.ET_EmulationColors.Black;\t\t\n\t\tGVL_Project.G_astEmulationStations[1].udiStationId\t\t:= 1;\t\t\n\t\t\n\t\tGVL_Project.G_astEmulationStations[2].sTextLabel\t\t:= '';\n\t\tGVL_Project.G_astEmulationStations[2].lrWaitPosition \t:= 0;\n\t\tGVL_Project.G_astEmulationStations[2].lrProcessPosition\t:= 0;\n\t\tGVL_Project.G_astEmulationStations[2].udiColor\t\t\t:= DTC.ET_EmulationColors.Black;\t\t\n\t\tGVL_Project.G_astEmulationStations[2].udiStationId\t\t:= 2;\t\t\n\t\t\n\t\txShowList := FALSE;\t\n\t\tiMoveSingleMovecommandVis := 0;\nELSE\n\t\t\n\t\t\n\t\tFOR udiLoop := 3 TO 6 DO\n\t\t\tGVL_Project.G_astEmulationStations[3].sTextLabel\t\t\t:= '';\n\t\t\tGVL_Project.G_astEmulationStations[3].lrWaitPosition \t\t:= 0;\n\t\t\tGVL_Project.G_astEmulationStations[3].lrProcessPosition\t\t:= 0;\n\t\t\tGVL_Project.G_astEmulationStations[3].udiColor\t\t\t\t:= DTC.ET_EmulationColors.Black;\t\t\n\t\t\tGVL_Project.G_astEmulationStations[3].udiStationId\t\t\t:= udiLoop;\t\t\n\t\tEND_FOR\t\t\n\t\t\n\t\tIF udiNumberOfCarrierInStationLoad > 0 THEN\n\t\t\tGVL_Project.G_astEmulationStations[1].sTextLabel\t\t:= 'LoadStation';\n\t\t\tGVL_Project.G_astEmulationStations[1].lrWaitPosition \t:= lrWaitStationPositionLoad;\n\t\t\tGVL_Project.G_astEmulationStations[1].lrProcessPosition\t:= lrProcessStartPosInStationLoad;\n\t\t\tGVL_Project.G_astEmulationStations[1].udiColor\t\t\t:= DTC.ET_EmulationColors.Black;\t\t\n\t\t\tGVL_Project.G_astEmulationStations[1].udiStationId\t\t:= 1;\t\n\t\tELSE\n\t\t\tGVL_Project.G_astEmulationStations[1].sTextLabel\t\t:= 'LoadStation';\n\t\t\tGVL_Project.G_astEmulationStations[1].lrWaitPosition \t:= lrWaitStationPositionLoad;\n\t\t\tGVL_Project.G_astEmulationStations[1].lrProcessPosition\t:= lrWaitStationPositionLoad;\n\t\t\tGVL_Project.G_astEmulationStations[1].udiColor\t\t\t:= DTC.ET_EmulationColors.Black;\t\t\n\t\t\tGVL_Project.G_astEmulationStations[1].udiStationId\t\t:= 1;\t\n\t\tEND_IF\t\n\n\t\tIF udiNumberOfCarrierInStationUnLoad > 0 THEN\n\t\t\tGVL_Project.G_astEmulationStations[2].sTextLabel\t\t:= 'UnloadStation';\n\t\t\tGVL_Project.G_astEmulationStations[2].lrWaitPosition\t:= lrWaitStationPositionUnLoad;\n\t\t\tGVL_Project.G_astEmulationStations[2].lrProcessPosition\t:= lrProcessStartPosInStationUnLoad;\n\t\t\tGVL_Project.G_astEmulationStations[2].udiColor\t\t\t:= DTC.ET_EmulationColors.Black;\t\t\n\t\t\tGVL_Project.G_astEmulationStations[2].udiStationId\t\t:= 2;\t\n\t\tELSE\n\t\t\tGVL_Project.G_astEmulationStations[2].sTextLabel\t\t:= 'UnloadStation';\n\t\t\tGVL_Project.G_astEmulationStations[2].lrWaitPosition\t:= lrWaitStationPositionUnLoad;\n\t\t\tGVL_Project.G_astEmulationStations[2].lrProcessPosition\t:= lrWaitStationPositionUnLoad;\n\t\t\tGVL_Project.G_astEmulationStations[2].udiColor\t\t\t:= DTC.ET_EmulationColors.Black;\t\t\n\t\t\tGVL_Project.G_astEmulationStations[2].udiStationId\t\t:= 2;\t\n\t\tEND_IF\t\n\t\t\n\t\tiMoveSingleMovecommandVis := 350;\n\nEND_IF\n\n//--- Signals for Machine Expert Twin --- \nGVL_Project.G_astEmulationStations[1].lrWaitPosition\t:= lrWaitStationPositionLoad;\nGVL_Project.G_astEmulationStations[2].lrWaitPosition\t:= lrWaitStationPositionUnLoad;\n\t\nIF udiNumberOfCarrierInStationLoad > 0 AND lrProcessGapInStationLoad > 0 THEN\n\tGVL_Project.G_astEmulationStations[1].lrProcessPosition\t:= lrProcessStartPosInStationLoad;\nELSE\n\tGVL_Project.G_astEmulationStations[1].lrProcessPosition\t:= lrWaitStationPositionLoad;\nEND_IF\t\n\nIF udiNumberOfCarrierInStationUnLoad > 0 AND lrProcessGapInStationUnLoad > 0 THEN\n\tGVL_Project.G_astEmulationStations[2].lrProcessPosition\t:= lrProcessStartPosInStationUnLoad;\nELSE\n\tGVL_Project.G_astEmulationStations[2].lrProcessPosition\t:= lrWaitStationPositionUnLoad;\nEND_IF\n\n\n//-- force green color of button\t\nIF uiButtonColor > 0 THEN\n\tfbButtonTimer(IN := TRUE, PT := T#500MS);\n\tIF fbButtonTimer.Q THEN\n\t\tuiButtonColor := 0;\n\t\tfbButtonTimer(IN := FALSE);\n\tEND_IF\nEND_IF","LineInfoPersistence":"(string)85ad2e12-cc41-46ee-83a2-56d432fdbe91_Impl_LineIds"}}}},"UniqueIdGenerator":"(string)1279"}},"TypeInfos":{"3b83b776":"{3b83b776-fb25-43b8-99f2-3c507c9143fc}","8ac092e5":"{8ac092e5-3128-4e26-9e7e-11016c6684f2}","f3878285":"{f3878285-8e4f-490b-bb1b-9acbb7eb04db}","string":"System.String"}}},"FormatVersion":"1.0"}